<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Raeha's Personal Tab - Chace Claborn</title>
    <link rel="stylesheet" href="/styles/main.css" />

    <!-- Only External Dependencies -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <style>
      /* Raeha's Page Styles */
      .raeha-container {
        max-width: 1200px;
        margin: 100px auto 40px;
        padding: 0 20px;
      }

      .welcome-section {
        /* Changed from purple gradient to match site theme */
        background: linear-gradient(135deg, #617140 0%, #4a5a30 100%);
        color: white;
        padding: 40px;
        border-radius: 15px;
        text-align: center;
        margin-bottom: 40px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .welcome-section h1 {
        font-size: 2.5rem;
        margin-bottom: 15px;
        color: white;
      }

      .welcome-section p {
        color: rgba(255, 255, 255, 0.95);
        font-size: 1.1rem;
      }

      .content-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 30px;
        margin-bottom: 40px;
      }

      .content-card {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
      }

      .content-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
      }

      .content-card h2 {
        font-size: 1.5rem;
        margin-bottom: 20px;
        color: #617140;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .content-card p {
        color: #666;
        line-height: 1.6;
        margin-bottom: 20px;
      }

      /* Form Styles */
      .customization-form {
        margin-top: 20px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 1rem;
        transition: border-color 0.3s;
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #617140;
      }

      .submit-btn {
        background: linear-gradient(135deg, #617140 0%, #4a5a30 100%);
        color: white;
        padding: 12px 30px;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        width: 100%;
        justify-content: center;
      }

      .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(97, 113, 64, 0.3);
      }

      /* Feature List */
      .feature-list {
        list-style: none;
        padding: 0;
      }

      .feature-list li {
        padding: 12px 0;
        border-bottom: 1px solid #f0f0f0;
        display: flex;
        align-items: center;
        gap: 10px;
        color: #555;
      }

      .feature-list li:last-child {
        border-bottom: none;
      }

      .feature-list i {
        color: #617140;
      }

      /* Photo Gallery */
      .photo-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .photo-placeholder {
        aspect-ratio: 1;
        background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #999;
        font-size: 0.9rem;
      }

      /* Special Message */
      .special-message {
        background: #fef3c7;
        padding: 20px;
        border-radius: 10px;
        margin-top: 15px;
      }

      .special-message p {
        color: #92400e;
        font-style: italic;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <!-- Loading Screen -->
    <div id="loading" class="loading">
      <i class="fas fa-spinner spinner"></i>
      <p>Checking access...</p>
    </div>

    <!-- Main Content (hidden until authentication) -->
    <div id="raeha-content" style="display: none">
      <!-- Header - Fixed Structure -->
      <header class="site-header">
        <div class="header-container">
          <div class="logo">
            <span class="logo-text">chaceclaborn.com</span>
          </div>

          <div class="nav-wrapper">
            <!-- Navigation will be injected here -->
            <nav class="main-nav" id="mainNav"></nav>

            <!-- React Auth Button Container -->
            <div id="auth-button-container"></div>

            <!-- Mobile Menu Button -->
            <button class="mobile-menu-btn" id="mobileMenuBtn">
              <span></span>
              <span></span>
              <span></span>
            </button>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="raeha-container">
        <!-- Welcome Section with Site Theme Colors -->
        <section class="welcome-section">
          <h1>Welcome to Your Custom Tab, Raeha!</h1>
          <p>
            This is your personal space to request customizations and features
            for the website.
          </p>
        </section>

        <!-- Content Grid -->
        <div class="content-grid">
          <!-- Customization Request Card -->
          <div class="content-card">
            <h2><i class="fas fa-paint-brush"></i> Request Customizations</h2>
            <p>
              Want something changed or added? Let me know what you'd like to
              see!
            </p>
            <div class="customization-form">
              <form id="customization-form">
                <div class="form-group">
                  <label for="request-type">Type of Request</label>
                  <select id="request-type" name="request-type" required>
                    <option value="">Select a type...</option>
                    <option value="design">Design Change</option>
                    <option value="content">Content Update</option>
                    <option value="feature">New Feature</option>
                    <option value="photo">Photo/Media</option>
                    <option value="other">Other</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="request-details">Details</label>
                  <textarea
                    id="request-details"
                    name="request-details"
                    rows="4"
                    placeholder="Describe what you'd like..."
                    required
                  ></textarea>
                </div>
                <button type="submit" class="submit-btn">
                  <i class="fas fa-paper-plane"></i> Send Request
                </button>
              </form>
            </div>
          </div>

          <!-- Current Features Card -->
          <div class="content-card">
            <h2><i class="fas fa-star"></i> Your Current Features</h2>
            <ul class="feature-list">
              <li><i class="fas fa-check-circle"></i> Custom tab access</li>
              <li>
                <i class="fas fa-check-circle"></i> Priority feature requests
              </li>
              <li>
                <i class="fas fa-check-circle"></i> Custom content sections
              </li>
              <li>
                <i class="fas fa-check-circle"></i> Photo galleries (coming
                soon)
              </li>
              <li>
                <i class="fas fa-check-circle"></i> Private messaging (coming
                soon)
              </li>
            </ul>
          </div>

          <!-- Quick Actions Card -->
          <div class="content-card">
            <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
            <div
              style="
                display: flex;
                flex-direction: column;
                gap: 15px;
                margin-top: 20px;
              "
            >
              <button
                class="submit-btn"
                onclick="alert('Feature coming soon!')"
              >
                <i class="fas fa-camera"></i> Upload Photos
              </button>
              <button
                class="submit-btn"
                onclick="alert('Feature coming soon!')"
              >
                <i class="fas fa-message"></i> Send Private Message
              </button>
            </div>
          </div>

          <!-- Photo Gallery Card -->
          <div class="content-card">
            <h2><i class="fas fa-images"></i> Our Photos</h2>
            <div class="photo-gallery">
              <div class="photo-placeholder">Photo 1</div>
              <div class="photo-placeholder">Photo 2</div>
              <div class="photo-placeholder">Photo 3</div>
              <div class="photo-placeholder">Photo 4</div>
            </div>
            <div class="special-message">
              <p>Photo gallery feature coming soon!</p>
            </div>
          </div>
        </div>

        <!-- Future Updates Section -->
        <section class="welcome-section" style="margin-top: 40px">
          <h2 style="color: white; margin-bottom: 15px">
            <i class="fas fa-rocket"></i> Coming Soon
          </h2>
          <p>
            More personalized features are on the way! If you have ideas, please
            use the request form above to let me know! I'll implement them as
            soon as possible and they'll appear here in your personal tab.
          </p>
        </section>
      </main>

      <!-- Footer -->
      <footer class="site-footer">
        <div class="footer-content">
          <p>&copy; 2025 Chace Claborn. All rights reserved.</p>
        </div>
      </footer>
    </div>

    <!-- ðŸŽ¯ SINGLE VITE ENTRY POINT - Updated path! -->
    <script type="module" src="/main.js"></script>

    <!-- Page-Specific Protection -->
    <script type="module">
      import { auth, db } from "/services/firebase/config.js";
      import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";
      import { getUserTier, TIERS } from "/services/firebase/auth-tiers.js";

      // Wait for DOM to be ready
      document.addEventListener("DOMContentLoaded", () => {
        // Protect the page - Allow admin OR girlfriend tier
        onAuthStateChanged(auth, async (user) => {
          const loading = document.getElementById("loading");
          const content = document.getElementById("raeha-content");

          if (user) {
            const userTier = await getUserTier();
            // Allow access if user is girlfriend tier OR admin
            const hasAccess =
              userTier === TIERS.GIRLFRIEND || userTier === TIERS.ADMIN;

            if (hasAccess) {
              loading.style.display = "none";
              content.style.display = "block";
            } else {
              // Redirect if no access
              window.location.href = "../index.html?error=access-denied";
            }
          } else {
            // Redirect to home if not logged in
            window.location.href = "../index.html?action=signin";
          }
        });
      });
    </script>
  </body>
</html>
